GPIO，全称是通用输入输出接口，这是单片机实现基本功能的最基本的结构，单片机想要发挥它的功能，就要通过引脚来输入或者输出电信号，因此，想要使用单片机，就一定要使能（通电启动）这一功能。

通常我们将流水灯作为单片机编程中的Hello world。

在日后的编程实践中，也可以作为查看程序运行状态的标志，例如，在执行某功能函数前点亮LED灯，在函数后将灯熄灭，即可确定目标程序是否已经执行。


## 目录

## 主要功能
- 数字电平输出
  > 这里所指的数字量，可以简单理解为二进制的"0"和"1"，反应在电路上，就是代表0和1的电压："电平"高或低，根据不同的规定，可以是不同的数值，常用的如(5V, 0V),(3.3V, 0V)等。
- 数字电平读入
- 复用为其他功能
- 

## GPIO的基本结构
1. GPIO的总线、挂载结构
   1. 什么叫总线？


## 

## 实验一：利用数字电平输出功能点亮LED

### 实验原理
1. 为了实现利用单片机的IO口点亮LED的目的，首先需要找到或搭建LED电路，通常来说，非最小系统板都会板载(带有)至少一个LED电路，如下图所示。

   ![普中T100_LED电路](..\images\GPIO\LED_T100.jpg)

   当然，由于开发板型号的不同，电路也会有所不同，在我目前用的这块开发板上，电路是这样的，由于用到了MOS管(YJL3400A)，安全性会更高一些，当然，采用了MOS管和三个发光二极管，也会更贵一些。

   ![DJI_RM_LED电路](..\images\GPIO\LED.jpg)

   阅读电路可以知道，当GS间电压VGS高于GND时，MOS管开启，LED灯亮，因此当单片机LED引脚输出高电平就可以点亮LED，输出低电平LED熄灭。

2. 接下来要解决的问题是，电路图上的哪一根引脚是图中对应的引脚，知道了引脚的名称，才能对着一根引脚进行配置。 

      [如何在原理图中查看网络对应的引脚](.\2024-6-30-入门基础知识.md)

#### LED电路上为什么要串接电阻和使用MOS管驱动？

   随意搜索一款贴片类型(例如0805、0603、0402封装)的发光二极管，查阅它的数据手册即可知道，发光二极管的正向耐压和对应的正向电流都无法达到单片机数字电平输出的值(通常是3.3V或5V)，因此需要串联电阻分压，保护二极管不会因为过压或过流烧毁。

**注意**：在使用电平输出这一功能时，一定要注意GPIO的驱动能力是有限的！即单片机引脚上能输出的电流是有限的，通常在mA级，不能直接接到如电机等需要较大电流的用电器正负极作为电压源，会导致**单片机烧毁**！

### 单片机功能配置

1. *新建工程并完成基础配置*
2. 点击顶部Pinout & Configuration选项卡，在右侧的原理图中找到引脚，左键配置引脚为输出模式。
   Note: 由于芯片的封装不同，这里的芯片外形可能有所差异，只要引脚正确就可以，不影响实际使用。

   ![选中引脚并设置为输出模式](..\images\GPIO\pin_set.jpg)

3. 在左侧System Core下选择GPIO选项，在弹出的设置区内可以看到刚才设置过的引脚，点击引脚设置引脚的初始化内容。

   ![引脚初始化设置](..\images\GPIO\pin_init.jpg)

   几个选项的作用如下：
   - GPIO output level: 输出模式下，初始化后的引脚输出状态(高/低电平)
   - GPIO mode: GPIO工作模式，一般选择推挽模式，开漏模式无法独立输出高电平。
   - GPIO Pull-up/Pull-down: 引脚上拉或下拉
      
      在输入模式下，当无外部电路的输入时，引脚的电平高低是不确定的，若此时进行读取就可能造成误判，通过上/下拉，就可以保证在无输入状态下的电平稳定在高/低状态。

   - Maximum output speed: 引脚输出速度，引脚复用为其他功能时有些会对输出速度有要求，这里手动低速控制时不必考虑。
   - User Label: 使用者可以对引脚进行命名。

4. 接下来完成其他初基础配置并生成代码，打开keil5工程
5. 使用库函数控制GPIO引脚电平的高、低以及转换功能，编写主函数
   1. 启动函数
   2. 状态控制函数
      1. HAL_GPIO_WritePin()
      2. HAL_GPIO_TOGGLE()
6. 一些可能方便的修改：宏定义(针对多处需要修改但不容易找全的情况)
   1. 引脚宏定义——一种不同于函数、对变量进行的封装
      1. 引脚: GPIO_PIN_X
      2. 通道: GPIOX
      3. 时钟: __GPIOX_CLK_ENABLE()
   2. 状态宏定义
      1. #define ON GPIO_PIN_RESET
      2. #define OFF GPIO_PIN_SET
7. 简单的进阶玩法：为你的单片机编写运行逻辑
   
   在完成了对单片机功能的实现以后，就可以尝试通过编写程序实现更加复杂有趣的功能了，例如尝试在你的main函数中编写程序，使单片机实现按照渐变的间隔闪烁。

## 实验二：数字电平输入——按键/灰度检测

### 实验原理
1. 为了实现利用单片机的IO口读取按键KEY状态目的，首先需要找到或搭建KEY电路，通常来说，非最小系统板都会板载(带有)至少一个KEY电路，如下图所示。

   ![普中T100_LED电路](..\images\GPIO\LED_T100.jpg)

   当然，由于开发板型号的不同，电路也会有所不同，在我目前用的这块开发板上，电路是这样的。

   ![DJI_RM_KEY电路](..\images\GPIO\key.jpg)

   阅读电路可以知道，当按键按下时，引脚接地，按键松开时，引脚接上拉电路，因此当按键按下时，单片机引脚会读取到低电平，按键松开时读取到高电平。

2. 接下来要解决的问题是，电路图上的哪一根引脚是图中对应的引脚，知道了引脚的名称，才能对着一根引脚进行配置。 

      [如何在原理图中查看网络对应的引脚](.\2024-6-30-入门基础知识.md)

#### 搭建电平读取电路时需要注意的问题

   查阅单片机数据手册可以知道，单片机引脚的耐压是有限的(通常是3.3V，兼容TTL电路的能够达到5V)，因此建电平读取电路时，需要注意输入电压和电流的大小，防止**单片机因为过压或过流烧毁**。

### 单片机功能配置

1. *新建工程并完成基础配置*
2. 点击顶部Pinout & Configuration选项卡，在右侧的原理图中找到引脚，左键配置引脚为输入模式。
   Note: 由于芯片的封装不同，这里的芯片外形可能有所差异，只要引脚正确就可以，不影响实际使用。

   ![选中引脚并设置为输入模式](..\images\GPIO\pin.jpg)

3. 在左侧System Core下选择GPIO选项，在弹出的设置区内可以看到刚才设置过的引脚，点击引脚设置引脚的初始化内容。

   ![引脚初始化设置](..\images\GPIO\pin_.jpg)

   几个选项的作用如下：
   - GPIO output level: 输出模式下，初始化后的引脚输出状态(高/低电平)
   - GPIO mode: GPIO工作模式，一般选择推挽模式，开漏模式无法独立输出高电平。
   - GPIO Pull-up/Pull-down: 引脚上拉或下拉
      
      在输入模式下，当无外部电路的输入时，引脚的电平高低是不确定的，若此时进行读取就可能造成误判，通过上/下拉，就可以保证在无输入状态下的电平稳定在高/低状态。

   - Maximum output speed: 引脚输出速度，引脚复用为其他功能时有些会对输出速度有要求，这里手动低速控制时不必考虑。
   - User Label: 使用者可以对引脚进行命名。

4. 接下来完成其他初基础配置并生成代码，打开keil5工程
5. 使用库函数控制GPIO引脚电平的高、低以及转换功能，编写主函数
   1. 启动函数
   2. 状态控制函数
      1. HAL_GPIO_ReadPin()
      2. 
6. 一些可能方便的修改：宏定义(针对多处需要修改但不容易找全的情况)
   1. 引脚宏定义——一种不同于函数、对变量进行的封装
      1. 引脚: GPIO_PIN_X
      2. 通道: GPIOX
      3. 时钟: __GPIOX_CLK_ENABLE()
   2. 状态宏定义
      1. #define ON GPIO_PIN_RESET
      2. #define OFF GPIO_PIN_SET
7. 简单的进阶玩法：为你的单片机编写运行逻辑
   
   在完成了对单片机功能的实现以后，就可以尝试通过编写程序实现更加复杂有趣的功能了，例如尝试在你的main函数中编写程序，使单片机根据按键的状态闪烁。

## 进阶：读懂芯片的GPIO原理简图
![GPIO结构简图](..\images\GPIO\GPIO_structure.png)
### 推挽电路

### 开漏电路

### 前置信息：三极管 switching

## 补充内容
### assert_param

是自己加入的内容吗？作用大吗？需要将吗？

### Doxygen快速配置

### 